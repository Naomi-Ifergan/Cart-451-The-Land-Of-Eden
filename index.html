<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The land of Eden</title>
  <!-- Stylesheet -->
  <link rel="stylesheet" href="style.css" />

  <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
  <!-- ResponsiveVoice -->
<script src="https://code.responsivevoice.org/responsivevoice.js"></script>
<!-- annyang -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/annyang/2.6.1/annyang.min.js"></script>
<script src="https://code.responsivevoice.org/responsivevoice.js?key=dxLA1Br5"></script>

<!-- Project Sources: 
background image: https://wallpaperaccess.com/futuristic-house
https://codingartistweb.com/2021/12/autocomplete-suggestions-on-input-field-with-javascript
https://www.youtube.com/watch?v=MBaw_6cPmAw&t=60s  -->
 
 <style>
    body {

      background: url('images/background.jpg') no-repeat center center fixed;
      background-size: cover;
      height: 100%;
      overflow: hidden;
  

    }
  </style>
</head>


<body>
 
  <h1> <br> The Land Of Eden: <br> The Land Of A Billion Minds <br> <br> </h1>

  <!-- Instruction Button -->
  <div id="overlay"></div>
  <button data-modal-target="#modal" onclick="instructions()" style="margin-top: 370px; left: 2px;"> Instructions </button>
  <div class="modal" id="modal">
    <div class="modal-header">
      <div class="title">Instructions</div>
      <button data-close-button class="close-button"></button>
    </div>
    <div class="modal-body">
      <br> Welcome to Land of Eden! <br> <br>
   <br>Together, we will create a utopia that caters to everyone's needs, regardless of race, gender, age, social class... <br>
   <br>Use the search bar to begin the creation of a new and perfect world.<br>
   <br> To do so, begin typing the words "no", "more", "less", or "better". <br>
   <br>To use the text-to-speech feature, simply click on the microphone icon in the search bar for more instructions.<br>
   <br>  </div>
  </div>

   <!-- View All Button -->
 <div id="viewallOverlay"></div> 
 <button data-viewall-target="#viewall" style="margin-top: 450px; left: 2px;" onclick ="viewAll();"> View All </button>
 <div class="viewall" id="viewall">
   <div class="viewall-header">
     <div class="title"> View All Submisisons</div>
<!--      <button data-close-button class="close-button">&times;</button> -->
   </div>
   <div class="viewall-body" id="viewall-body">
 
   </div>
 </div> 


     <!-- Top Answers Button -->
     <div id="scoreOverlay"></div>
     <button data-score-target="#score" style="margin-top: 410px; left: 2px;">Top Answers</button>
     <div class="score" id="score">
       <div class="score-header">
         <div class="title">Top Answers</div>
   
       </div>
       <div class="score-body">
         
     Top Answers will be displayed based on the submitted entries!
       </div>
     </div>
  
   <!-- Search bar -->
    <form autocomplete="off">
      <button class="mic-button" type = "button" onclick= "start();">
        <ion-icon name="mic-sharp" size="large" style="justify-content:center"></ion-icon>
        </button>
      <div>
        <input type="text" id="input" placeholder="What would make the world a perfect place?">
     
      </div>
      <div id="entry">
      </div>
     
   
       <!-- View All Button 
      <div id="viewall">
        <div class="ShowHide" id="viewallclosable">
          <div id="right">
            <a href="#" onclick="Hide(viewall);">X</a>
          </div>
          <div id="left">
           
        </div>
        <p> All submissions: <br> </p>
      </div>
      </div>  -->


   
  <ul class="list"></ul>
      <div id = "buttons"> </div> 
</form>


    <script>
      let answers = [ 
        "NO racism",
        "NO antisemitism",
        "NO violence",
        "NO animal abuse",
        "NO discrimination",
        "NO war",
        "NO hate crime",
        "NO more covid",
        "NO more homeless people",
        "NO guns",
        "NO diseases",
        "NO terrorism",
        "NO drugs",
        "NO police brutality",
        "NO more gender inequality",
        "NO rapists",

        "more green spaces",
        "more handicap access",
        "more doctors",
        "more awareness",
        "more resources for mental health",
        "more diversity",
        "more hybrid vehicles",
        "more comunity gardens",
        "more renewable source energy",
        "more slow fashion brands",
        "more freedom",
        "more peace",
        "more sustainable living",
        "more love",
        "more acceptance",
        "more kindness",
        "more remote jobs",

        "less taxes",
        "less poverty",
        "less pollution",
        "less divorces",
        "less unemployment rate",
        "less judgment",
        "less waste",
        "less technology",

        "better health care system",
        "better education",
        "better rights",
        "better government",
        "better public transportation",
        "better higher minimum wage",
        "better weather", 
        "better roads",
        "better political system",
        "better working conditions"
       
    
      ];


//          // Add our commands to annyang
//          annyang.addCommands(commands);

// // Start listening. You can call this here, or attach this call to an event, button, etc.
// annyang.start();
// annyang.debug(true); 


function start() {

responsiveVoice.speak("What would make the world a perfect place?" , "UK English Male")

}

function instructions() {

responsiveVoice.speak("Welcome to The Land of Eden! Together, we will create a utopia that caters to everyone's needs,regardless of race, gender, age, and social class. Use the search bar to begin the creation of a new and perfect world. To do so, begin typing the words no, more, less, or better. To use the text-to-speech feature, simply click on the microphone icon in the search bar for more instructions.", "UK English Male")

}
      //Instruction button
      const openModalButtons = document.querySelectorAll('[data-modal-target]')
      const closeModalButtons = document.querySelectorAll('[data-close-button]')
      const overlay = document.getElementById('overlay')

openModalButtons.forEach(button => {
  button.addEventListener('click', () => {
    const modal = document.querySelector(button.dataset.modalTarget)
    openModal(modal)
  })
})

overlay.addEventListener('click', () => {
  const modals = document.querySelectorAll('.modal.active')
  modals.forEach(modal => {
    closeModal(modal)
  })
})

closeModalButtons.forEach(button => {
  button.addEventListener('click', () => {
    const modal = button.closest('.modal')
    closeModal(modal)
  })
})

function openModal(modal) {
  if (modal == null) return
  modal.classList.add('active')
  overlay.classList.add('active')
}

function closeModal(modal) {
  if (modal == null) return
  modal.classList.remove('active')
  overlay.classList.remove('active')
}

//View All button
const openViewallButtons = document.querySelectorAll('[data-viewall-target]')
const closeViewallButtons = document.querySelectorAll('[data-viewall-button]')
const viewallOverlay = document.getElementById('viewallOverlay')

openViewallButtons.forEach(button => {
  button.addEventListener('click', () => {
    const viewall = document.querySelector(button.dataset.viewallTarget)
    openViewall(viewall)
  })
})

viewallOverlay.addEventListener('click', () => {
  const viewall = document.querySelectorAll('.viewall.active')
  viewall.forEach(viewall => {
    closeViewall(viewall);
    
  })
})

closeViewallButtons.forEach(button => {
  button.addEventListener('click', () => {
    const viewall = button.closest('.viewall')
    closeViewall(viewall)
  })
})

function openViewall(viewall) {
  if (viewall == null) return
  viewall.classList.add('active')
  viewallOverlay.classList.add('active')
}

function closeViewall(viewall) {
  if (viewall == null) return
  viewall.classList.remove('active')
  viewallOverlay.classList.remove('active')
}

//Top Answers - Score button
const openScoreButtons = document.querySelectorAll('[data-score-target]')
      const closeScoreButtons = document.querySelectorAll('[data-close-score]')
      const scoreOverlay = document.getElementById('scoreOverlay')

openScoreButtons.forEach(button => {
  button.addEventListener('click', () => {
    const score = document.querySelector(button.dataset.scoreTarget)
    openScore(score);
  
  })
})

scoreOverlay.addEventListener('click', () => {
  const scores = document.querySelectorAll('.score.active')
  scores.forEach(score => {
    closeScore(score)

  })
})

closeScoreButtons.forEach(button => {
  button.addEventListener('click', () => {
    const score = button.closest('.score')
    closeScore(score)
 
  })
})

function openScore(score) {
  if (score == null) return
  score.classList.add('active')
  scoreOverlay.classList.add('active')
 
}

function closeScore(score) {
  if (score == null) return
  score.classList.remove('active')
  scoreOverlay.classList.remove('active')
 
}

      let sortedAnswers = answers.sort();
      let input = document.getElementById("input");

      //Sound
      let sound = new Audio("sound/sound.mp3");

      //$("p").hide();
      //$("#viewallclosable").hide();

      // //voice activation with Annyang
      //   if (annyang) {
      //     var commands = {
      //       answers: displayAnswers(value) { //the player is giving the command to display their answer
      //         listItem.innerHTML = word;
      //         document.querySelector(".list").appendChild(listItem);
      //         sound.play();
      //         sound.volume = 0.1;
      //        //when the command is said, answer is displayed on screen.
      //         responsiveVoice.speak("Your answer has been submitted.", "UK English Male")
      //       }
      //     }
      
      //   }


      //Execute function on keyup
      input.addEventListener("keyup", (e) => {
        //loop through above array
        //Initially remove all elements (so if user erases a letter or adds new letter then clean previous outputs)
        removeElements();
        for (let i of sortedAnswers) {
          //convert input to lowercase and compare with each string

          if (
            i.toLowerCase().startsWith(input.value.toLowerCase()) &&
            input.value != ""
          ) {
            //create list element
            let listItem = document.createElement("li");
            listItem.classList.add("list-items");
            listItem.style.cursor = "pointer";
            listItem.setAttribute("onclick", "displayAnswers('" + i + "')");

            //Display matched part in bold
            let word = "<b>" + i.substr(0, input.value.length) + "</b>";
            word += i.substr(input.value.length);
            //display the value in array
            listItem.innerHTML = word;
            document.querySelector(".list").appendChild(listItem);
          }
        }
      });

      function displayAnswers(value) {
        input.value = value;

        var posY=Math.floor(Math.random() *800) + 1; // we give it a max of 800 so that it can be seen on the smallest computer screen which is aprox that size.
        var posX=Math.floor(Math.random() *800) + 1;
        var posL=Math.floor(Math.random() *800) + 1;
        var posR=Math.floor(Math.random() *800) + 1;
        const box = document.createElement("div");
        box.id = 'entry' + Date.now();
        //box.id = "box";
        box.innerHTML=value;
        box.classList.add('entry');
        //alert(posX+'-'+posY);
        box.setAttribute('style','top:'+posX+'px; bottom:'+posY+'px;'+'left:'+posL+'px; right:'+posR+'px;');
        document.getElementById('entry').appendChild(box);
        //document.getElementById('entry').innerHTML = document.getElementById('entry').innerHTML + value + "<br>";
        document.getElementById('input').value = '';

        removeElements();
      }

      function removeElements() {
        //clear all the item
        let items = document.querySelectorAll(".list-items");
        items.forEach((item) => {
          item.remove();
        });
      }


  // //View All button
  //   let viewAllButton = document.createElement('button');
  //   viewAllButton.id = 'viewAll';
  //   viewAllButton.innerHTML = 'View All';
  //   viewAllButton.setAttribute("onclick", "viewAll()");
  //   document.body.appendChild(viewAllButton);

 function viewAll(){
  //display the value in array
  //listItem.innerHTML = word;
  //document.querySelector(".list").appendChild(listItem);
  let entrylist=document.querySelectorAll(".entry");
  document.getElementById('viewall-body').innerHTML='';
  for(var i=0; i<entrylist.length;i++)
  {
    // entrylist[i].style.visibility="hidden";
    $("p").show();
    $("#viewallclosable").show();
    
    document.getElementById('viewall-body').innerHTML = document.getElementById('viewall-body').innerHTML + entrylist[i].innerHTML+'<br>';
    //alert(entrylist[i].innerHTML);
  }

 }

//  function topAnswers(){
 
//   let entrylist=document.querySelectorAll(".entry");
//   for(var i=0; i<entrylist.length;i++)
//   {
//     entrylist[i].style.visibility="hidden";
//     $("p").hide();
//     $("#viewallclosable").hide();
    
    
//   }

//  }

//  function Hide(HideID) { //instead of hiding it, it makes disappear therefore we can never access the view all section after closing it once.
//   HideID.style.display = "none"; 
// }

    </script>

<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>

</html>