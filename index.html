<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The land of Eden</title>
  <!-- Stylesheet -->
  <link rel="stylesheet" href="style.css" />
  <!--Scripts-->
  <script src="script.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
  <!-- ResponsiveVoice -->
<script src='https://code.responsivevoice.org/responsivevoice.js'></script>
<!-- annyang -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/annyang/2.6.1/annyang.min.js"></script>
<script src="https://code.responsivevoice.org/responsivevoice.js?key=dxLA1Br5"></script>


  <style>
    body {

      background: url('images/background.jpg') no-repeat center center fixed;
      background-size: cover;
      height: 100%;
      overflow: hidden;

    }
  </style>
</head>


<body>

  <h1> <br> The Land Of Eden: <br> The Land Of A Billion Minds <br> <br> </br>

    </div>
    <form autocomplete="off">
      <div>
        <input type="text" id="input" placeholder="What would make the world a perfect place?" />

      </div>
      <div id="entry">
      </div>
        <ul class="list"></ul>
      <div id=buttons> </div>


    </form>


    <script>
      let answers = [ //I will be adding more data as I go. (currently asking people for answers)
        "no racism",
        "no antisemitism",
        "no violence",
        "no animal abuse",
        "no discrimination",
        "no war",
        "no hate crime",
        "no more covid",
        "no more homeless people",
        "no guns",
        "no diseases",
        "no terrorism",
        "no drugs",
        "no police brutality",

        "more green spaces",
        "more handicap access",
        "more doctors",
        "more Indigenous awareness",
        "more resources for mental health",
        "more diversity",
        "more hybrid vehicles",
        "more comunity gardens",

        "less taxes",
        "less poverty",
        "less pollution",
        "less divorces",
        "less unemployment rate",

        "better health care system",
        "better education",
        "better rights",
        "better government",
        "better public transportation",

        "gender equality",
        "renewable source energy",
        "vegan living",

        "sustainable living",
        "slow fashion",

        "higher minimum wage",

        "a safer environment",
        "all lives matter",

        "peace",
        "pet friendly environment",

        "freedom",

      ];


      let sortedAnswers = answers.sort();
      let input = document.getElementById("input");

      //voice activation with Annyang
        if (annyang) {
          var commands = {
            answers: function() { //the player is giving the command to display their answer
              listItem.innerHTML = word;
              document.querySelector(".list").appendChild(listItem);
             //when the command is said, answer is displayed on screen.
              responsiveVoice.speak("Your answer has been submitted. Anything else?", "UK English Male")
            }
          }
          // Add our commands to annyang
          annyang.addCommands(commands);

          // Start listening. You can call this here, or attach this call to an event, button, etc.
          annyang.start();
          annyang.debug(true);
        }


      //Execute function on keyup
      input.addEventListener("keyup", (e) => {
        //loop through above array
        //Initially remove all elements (so if user erases a letter or adds new letter then clean previous outputs)
        removeElements();
        for (let i of sortedAnswers) {
          //convert input to lowercase and compare with each string

          if (
            i.toLowerCase().startsWith(input.value.toLowerCase()) &&
            input.value != ""
          ) {
            //create list element
            let listItem = document.createElement("li");
            listItem.classList.add("list-items");
            listItem.style.cursor = "pointer";
            listItem.setAttribute("onclick", "displayAnswers('" + i + "')");

            //Display matched part in bold
            let word = "<b>" + i.substr(0, input.value.length) + "</b>";
            word += i.substr(input.value.length);
            //display the value in array
            listItem.innerHTML = word;
            document.querySelector(".list").appendChild(listItem);
          }
        }
      });

      function displayAnswers(value) {
        input.value = value;

        var posY=Math.floor(Math.random() *800) + 1; // we give it a max of 800 so that it can be seen on the smallest computer screen which is aprox that size.
        var posX=Math.floor(Math.random() *800) + 1;
        const box = document.createElement("div");
        box.id = 'entry' + Date.now();
        //box.id = "box";
        box.innerHTML=value;
        box.classList.add('entry');

        box.setAttribute('style','top:'+posX+'px; bottom:'+posY+'px;'+'left:'+posX+'px; right:'+posY+'px;');
        document.getElementById('entry').appendChild(box);
        //document.getElementById('entry').innerHTML = document.getElementById('entry').innerHTML + value + "<br>";
        document.getElementById('input').value = '';

        removeElements();
      }

      function removeElements() {
        //clear all the item
        let items = document.querySelectorAll(".list-items");
        items.forEach((item) => {
          item.remove();
        });
      }


//Top Answers button
  let topAnswersButton = document.createElement('button');
  topAnswersButton.id = 'topAnswers';
  topAnswersButton.innerHTML = 'Top Answers';
  document.body.appendChild(topAnswersButton);

  //View All button
    let viewAllButton = document.createElement('button');
    viewAllButton.id = 'viewAll';
    viewAllButton.innerHTML = 'View All';
    document.body.appendChild(viewAllButton);

// function viewAll(){
//   //display the value in array
//   listItem.innerHTML = word;
//   document.querySelector(".list").appendChild(listItem);
// }

    </script>
</body>

</html>
